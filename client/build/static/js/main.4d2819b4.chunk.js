(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{25:function(e,t,a){},43:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(34),o=a.n(c),i=(a(43),a(25),a(4)),r=a(2),l=a(6),d=a(7),j=a(9),b=a(8),m=a(0),h=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"hero content text-center",children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"center",children:[Object(m.jsx)("h1",{className:"text-center fw-bold",children:"Dev Social"}),Object(m.jsx)("p",{className:"lead text-center",children:"Chat with other developers."}),Object(m.jsxs)("p",{className:"text-center",children:[Object(m.jsx)(i.b,{className:"btn btn-dark btn-lg me-2",to:"/signup",role:"button",children:"Signup"}),Object(m.jsx)(i.b,{className:"btn btn-dark btn-lg",to:"/login",role:"button",children:"Login"})]})]})})})}}]),a}(s.Component),u=a(18),p=a(10),v=a(15),O=a.n(v),x=a(5),f=a.n(x),g=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={name:"",email:"",password:"",password2:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.name,email:this.state.email,password:this.state.password,password2:this.state.password2};f.a.post("api/users",a).then((function(e){return t.props.history.push("/login")})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return Object(m.jsxs)("div",{className:"mt-5",children:[Object(m.jsx)("h2",{className:"text-center fw-bold mb-5",children:"Signup"}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(m.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"text",className:O()("form-control",{"is-invalid":e.name}),name:"name",placeholder:"Name",value:this.state.name,onChange:this.onChange}),e.name&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.name})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"email",className:O()("form-control",{"is-invalid":e.email}),name:"email",placeholder:"Email Address",value:this.state.email,onChange:this.onChange}),e.email&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.email})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password}),name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}),e.password&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password2}),name:"password2",placeholder:"Confirm Password",value:this.state.password2,onChange:this.onChange}),e.password2&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.password2})]}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Submit"})})]}),Object(m.jsxs)("p",{className:"text-center",children:["Already have an account? ",Object(m.jsx)(i.b,{to:"/login",children:"Login"})]})]})})})]})}}]),a}(s.Component),N=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},w=a(17),k=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={email:"",password:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,password:this.state.password};f.a.post("/api/users/login",a).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),N(a),t.props.history.push("/dashboard")})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return Object(m.jsxs)("div",{className:"mt-5",children:[Object(m.jsx)("h2",{className:"text-center fw-bold mb-5",children:"Login"}),Object(m.jsx)("div",{className:"container",children:Object(m.jsx)("div",{className:"row",children:Object(m.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(m.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"email",className:O()("form-control",{"is-invalid":e.email}),name:"email",placeholder:"Email Address",onChange:this.onChange}),e.email&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.email})]}),Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password}),name:"password",placeholder:"Password",onChange:this.onChange}),e.password&&Object(m.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Submit"})})]}),Object(m.jsxs)("p",{className:"text-center",children:["Don't have an account? ",Object(m.jsx)(i.b,{to:"/signup",children:"Signup"})]})]})})})]})}}]),a}(s.Component),y=a(38),C=a(24),S=a.n(C),D=a(36);var A=function(e){return Object(m.jsxs)("li",{className:"nav-item",children:[Object(m.jsx)("div",{className:"dropdown-toggle nav-link",id:"dropdownMenu","data-bs-toggle":"dropdown","aria-expanded":"false",children:Object(m.jsx)("span",{className:"fas fa-user-circle fa-2x"})}),Object(m.jsxs)("ul",{className:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenu",children:[Object(m.jsx)("li",{children:Object(m.jsx)("button",{className:"dropdown-item",onClick:e.onLogoutClick,children:"Logout"})}),Object(m.jsx)("li",{children:Object(m.jsx)("button",{className:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#deleteModal",children:"Delete account"})})]})]})};var T=function(e){return Object(m.jsx)("div",{className:"modal fade",id:"deleteModal",tabIndex:"-1","aria-labelledby":"modalLabel","aria-hidden":"true",children:Object(m.jsx)("div",{className:"modal-dialog",children:Object(m.jsxs)("div",{className:"modal-content",children:[Object(m.jsxs)("div",{className:"modal-header",children:[Object(m.jsx)("h5",{className:"modal-title",id:"modalLabel",children:"Delete account?"}),Object(m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(m.jsx)("div",{className:"modal-body",children:"This will delete your profile information and all of your posts."}),Object(m.jsxs)("div",{className:"modal-footer",children:[Object(m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),Object(m.jsx)("button",{type:"button",className:"btn btn-danger",onClick:e.onDeleteAccountClick,children:"Delete"})]})]})})})},L=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={isAuthenticated:!1},s.onLogoutClick=s.onLogoutClick.bind(Object(p.a)(s)),s.onDeleteAccountClick=s.onDeleteAccountClick.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.setState({isAuthenticated:!0})}},{key:"onLogoutClick",value:function(){localStorage.removeItem("jwtToken"),N(!1),window.location.href="/"}},{key:"onDeleteAccountClick",value:function(){var e=Object(D.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.delete("/api/user/posts");case 3:return e.next=5,f.a.delete("/api/user");case 5:localStorage.removeItem("jwtToken"),N(!1),window.location.href="/",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isAuthenticated,t=Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),Object(m.jsx)(A,{onLogoutClick:this.onLogoutClick})]});return Object(m.jsxs)("div",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("ul",{className:"navbar-nav",children:Object(m.jsx)("li",{className:"navbar-brand",children:"Dev Social"})}),Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(i.b,{className:"nav-link",to:"/posts",children:"Posts"})}),e?t:null]})]}),Object(m.jsx)(T,{onDeleteAccountClick:this.onDeleteAccountClick})]})}}]),a}(s.Component),M=a(37),P=a.n(M);var I=function(e){return Object(m.jsx)("li",{className:"mb-3",children:Object(m.jsx)("div",{className:"card",children:Object(m.jsxs)("div",{className:"card-body",children:[Object(m.jsx)("span",{className:"card-title fw-bold",children:e.name}),Object(m.jsx)("p",{className:"card-text mb-1 mt-1",children:e.text}),Object(m.jsx)("span",{className:"text-muted",children:P()(e.createdAt).format("MMM D, YYYY")})]})})})};var Y=function(e){var t=e.posts.map((function(e){return Object(m.jsx)(I,{createdAt:e.createdAt,name:e.name,text:e.text},e._id)}));return Object(m.jsx)("ul",{className:"list-unstyled",children:t})},F=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={currentUser:{},posts:[],text:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.jwtToken){var t=localStorage.jwtToken,a=Object(w.a)(t);this.setState({currentUser:a}),f.a.get("/api/users/"+a.id+"/posts").then((function(t){e.setState({posts:t.data})})).catch((function(e){console.log(e.response.data)}))}else this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.currentUser.name,text:this.state.text};f.a.post("/api/posts",a).then((function(e){t.setState({text:""}),t.setState({errors:{}}),t.setState({posts:[e.data].concat(Object(y.a)(t.state.posts))})})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e,t=this.state.errors;return e=0===this.state.posts.length?Object(m.jsx)("p",{className:"text-center",children:"You have not created any posts."}):Object(m.jsx)(Y,{posts:this.state.posts}),Object(m.jsxs)("div",{children:[Object(m.jsx)(L,{}),Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(m.jsx)("div",{class:"row mt-5",children:Object(m.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(m.jsxs)("div",{className:"mb-3",children:[Object(m.jsx)("textarea",{name:"text",className:O()("form-control",{"is-invalid":t.text}),rows:"2",placeholder:"Say something...",value:this.state.text,onChange:this.onChange}),t.text&&Object(m.jsx)("div",{className:"invalid-feedback",children:t.text})]}),Object(m.jsx)("div",{className:"mb-3",children:Object(m.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Create Post"})})]})}),Object(m.jsxs)("div",{className:"row mt-5",children:[Object(m.jsx)("h2",{className:"text-center",children:"Posts"}),e]})]})})]})}}]),a}(s.Component),E=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={posts:[]},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("/api/posts").then((function(t){e.setState({posts:t.data})})).catch((function(t){e.setState({errors:t.response.data})}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(L,{}),Object(m.jsx)("div",{className:"container mt-5",children:Object(m.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(m.jsx)(Y,{posts:this.state.posts})})})]})}}]),a}(s.Component),U=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"center",children:[Object(m.jsx)("h1",{children:"Page not found"}),Object(m.jsxs)("p",{className:"text-center",children:["Return ",Object(m.jsx)(i.b,{to:"/",children:"home"})]})]})}}]),a}(s.Component);if(localStorage.jwtToken){N(localStorage.jwtToken);var z=Object(w.a)(localStorage.jwtToken),B=Date.now()/1e3;z.exp<B&&(localStorage.removeItem("jwtToken"),N(!1),window.location.href="/login")}var J=function(){return Object(m.jsx)(i.a,{children:Object(m.jsxs)(r.c,{children:[Object(m.jsx)(r.a,{exact:!0,path:"/",component:h}),Object(m.jsx)(r.a,{exact:!0,path:"/signup",component:g}),Object(m.jsx)(r.a,{exact:!0,path:"/login",component:k}),Object(m.jsx)(r.a,{exact:!0,path:"/dashboard",component:F}),Object(m.jsx)(r.a,{exact:!0,path:"/posts",component:E}),Object(m.jsx)(r.a,{component:U})]})})},R=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,74)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,o=t.getTTFB;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(J,{})}),document.getElementById("root")),R()}},[[73,1,2]]]);
//# sourceMappingURL=main.4d2819b4.chunk.js.map