(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(32),i=a.n(c),o=(a(40),a(41),a(4)),r=a(2),l=a(5),d=a(6),j=a(8),b=a(7),h=a(0),m=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return Object(h.jsx)("div",{className:"hero content text-center",children:Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"center",children:[Object(h.jsx)("h1",{className:"text-center fw-bold",children:"Dev Social"}),Object(h.jsx)("p",{className:"lead text-center",children:"Chat with other developers."}),Object(h.jsxs)("p",{className:"text-center",children:[Object(h.jsx)(o.b,{className:"btn btn-dark btn-lg me-2",to:"/signup",role:"button",children:"Signup"}),Object(h.jsx)(o.b,{className:"btn btn-dark btn-lg",to:"/login",role:"button",children:"Login"})]})]})})})}}]),a}(s.Component),u=a(17),p=a(14),v=a(15),O=a.n(v),x=a(12),f=a.n(x),g=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={name:"",email:"",password:"",password2:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.name,email:this.state.email,password:this.state.password,password2:this.state.password2};f.a.post("api/users",a).then((function(e){return t.props.history.push("/login")})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return Object(h.jsxs)("div",{className:"mt-5",children:[Object(h.jsx)("h2",{className:"text-center fw-bold mb-5",children:"Signup"}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(h.jsxs)("form",{noValidate:!0,onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"text",className:O()("form-control",{"is-invalid":e.name}),name:"name",placeholder:"Name",value:this.state.name,onChange:this.onChange}),e.name&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.name})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"email",className:O()("form-control",{"is-invalid":e.email}),name:"email",placeholder:"Email Address",value:this.state.email,onChange:this.onChange}),e.email&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.email})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password}),name:"password",placeholder:"Password",value:this.state.password,onChange:this.onChange}),e.password&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password2}),name:"password2",placeholder:"Confirm Password",value:this.state.password2,onChange:this.onChange}),e.password2&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.password2})]}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Submit"})})]}),Object(h.jsxs)("p",{className:"text-center",children:["Already have an account? ",Object(h.jsx)(o.b,{to:"/login",children:"Login"})]})]})})})]})}}]),a}(s.Component),N=function(e){e?f.a.defaults.headers.common.Authorization=e:delete f.a.defaults.headers.common.Authorization},w=a(19),k=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={email:"",password:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.props.history.push("/dashboard")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={email:this.state.email,password:this.state.password};f.a.post("/api/users/login",a).then((function(e){var a=e.data.token;localStorage.setItem("jwtToken",a),N(a),t.props.history.push("/dashboard")})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e=this.state.errors;return Object(h.jsxs)("div",{className:"mt-5",children:[Object(h.jsx)("h2",{className:"text-center fw-bold mb-5",children:"Login"}),Object(h.jsx)("div",{className:"container",children:Object(h.jsx)("div",{className:"row",children:Object(h.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"email",className:O()("form-control",{"is-invalid":e.email}),name:"email",placeholder:"Email Address",onChange:this.onChange}),e.email&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.email})]}),Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("input",{type:"password",className:O()("form-control",{"is-invalid":e.password}),name:"password",placeholder:"Password",onChange:this.onChange}),e.password&&Object(h.jsx)("div",{className:"invalid-feedback",children:e.password})]}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Submit"})})]}),Object(h.jsxs)("p",{className:"text-center",children:["Don't have an account? ",Object(h.jsx)(o.b,{to:"/signup",children:"Signup"})]})]})})})]})}}]),a}(s.Component),S=a(35),y=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={isAuthenticated:!1},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){localStorage.jwtToken&&this.setState({isAuthenticated:!0})}},{key:"onLogoutClick",value:function(e){e.preventDefault(),localStorage.removeItem("jwtToken"),N(!1),window.location.href="/"}},{key:"render",value:function(){var e=this.state.isAuthenticated,t=Object(h.jsxs)("ul",{className:"navbar-nav",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{className:"btn btn-warning",onClick:this.onLogoutClick.bind(this),children:"Logout"})})]});o.b,o.b;return Object(h.jsx)("div",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("ul",{className:"navbar-nav",children:Object(h.jsx)("li",{className:"navbar-brand",children:"Dev Social"})}),Object(h.jsxs)("ul",{className:"navbar-nav",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/posts",children:"Posts"})}),e?t:null]})]})})}}]),a}(s.Component),C=a(34),D=a.n(C);var T=function(e){return Object(h.jsx)("li",{className:"mb-3",children:Object(h.jsx)("div",{className:"card",children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("span",{className:"card-title fw-bold",children:e.name}),Object(h.jsx)("p",{className:"card-text mb-1 mt-1",children:e.text}),Object(h.jsx)("span",{className:"text-muted",children:D()(e.createdAt).format("MMM D, YYYY")})]})})})};var A=function(e){var t=e.posts.map((function(e){return Object(h.jsx)(T,{createdAt:e.createdAt,name:e.name,text:e.text},e._id)}));return Object(h.jsx)("ul",{className:"list-unstyled",children:t})},M=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={currentUser:{},posts:[],text:"",errors:{}},s.onChange=s.onChange.bind(Object(p.a)(s)),s.onSubmit=s.onSubmit.bind(Object(p.a)(s)),s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.jwtToken){var t=localStorage.jwtToken,a=Object(w.a)(t);this.setState({currentUser:a}),f.a.get("/api/users/"+a.id+"/posts").then((function(t){e.setState({posts:t.data})})).catch((function(e){console.log(e.response.data)}))}else this.props.history.push("/")}},{key:"onChange",value:function(e){this.setState(Object(u.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){var t=this;e.preventDefault();var a={name:this.state.currentUser.name,text:this.state.text};f.a.post("/api/posts",a).then((function(e){t.setState({text:""}),t.setState({errors:{}}),t.setState({posts:[e.data].concat(Object(S.a)(t.state.posts))})})).catch((function(e){t.setState({errors:e.response.data})}))}},{key:"render",value:function(){var e,t=this.state.errors;return e=0===this.state.posts.length?Object(h.jsx)("p",{className:"text-center",children:"You have not created any posts."}):Object(h.jsx)(A,{posts:this.state.posts}),Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{}),Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",{className:"col-md-6 offset-md-3",children:[Object(h.jsx)("div",{class:"row mt-5",children:Object(h.jsxs)("form",{onSubmit:this.onSubmit,children:[Object(h.jsxs)("div",{className:"mb-3",children:[Object(h.jsx)("textarea",{name:"text",className:O()("form-control",{"is-invalid":t.text}),rows:"2",placeholder:"Say something...",value:this.state.text,onChange:this.onChange}),t.text&&Object(h.jsx)("div",{className:"invalid-feedback",children:t.text})]}),Object(h.jsx)("div",{className:"mb-3",children:Object(h.jsx)("input",{type:"submit",className:"form-control btn btn-warning btn-lg",value:"Create Post"})})]})}),Object(h.jsxs)("div",{className:"row mt-5",children:[Object(h.jsx)("h2",{className:"text-center",children:"Posts"}),e]})]})})]})}}]),a}(s.Component),P=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).state={posts:[]},s}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;f.a.get("/api/posts").then((function(t){e.setState({posts:t.data}),console.log(e.state.posts)})).catch((function(t){e.setState({errors:t.response.data})}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(y,{}),Object(h.jsx)("div",{className:"container mt-5",children:Object(h.jsx)("div",{className:"col-md-6 offset-md-3",children:Object(h.jsx)(A,{posts:this.state.posts})})})]})}}]),a}(s.Component),L=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(h.jsxs)("div",{className:"center",children:[Object(h.jsx)("h1",{children:"Page not found"}),Object(h.jsxs)("p",{className:"text-center",children:["Return ",Object(h.jsx)(o.b,{to:"/",children:"home"})]})]})}}]),a}(s.Component);if(localStorage.jwtToken){N(localStorage.jwtToken);var I=Object(w.a)(localStorage.jwtToken),Y=Date.now()/1e3;I.exp<Y&&(localStorage.removeItem("jwtToken"),N(!1),window.location.href="/login")}var F=function(){return Object(h.jsx)(o.a,{children:Object(h.jsxs)(r.c,{children:[Object(h.jsx)(r.a,{exact:!0,path:"/",component:m}),Object(h.jsx)(r.a,{exact:!0,path:"/signup",component:g}),Object(h.jsx)(r.a,{exact:!0,path:"/login",component:k}),Object(h.jsx)(r.a,{exact:!0,path:"/dashboard",component:M}),Object(h.jsx)(r.a,{exact:!0,path:"/posts",component:P}),Object(h.jsx)(r.a,{component:L})]})})},E=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,71)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};i.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(F,{})}),document.getElementById("root")),E()}},[[70,1,2]]]);
//# sourceMappingURL=main.84a70490.chunk.js.map